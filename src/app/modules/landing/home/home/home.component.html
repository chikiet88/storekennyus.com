<mat-drawer-container class="example-container" autosize>
  <mat-drawer #drawer class="example-sidenav z-20 lg:hidden" mode="over">
    <div class="mobile-header" id="mobile-menu">
      <div class="">
        <div class="p-3">
          <div class="flex">
            <div
              class="w-40    text-center py-2 rounded-2xl text-lg font-bold mr-2 {{
                MenuActive
                  ? 'bg-blue-500 text-white'
                  : 'text-purple-500 bg-gray-200'
              }}"
              (click)="MenuActive = !MenuActive; DanhmucActive = false"
            >
              Menu
            </div>
            <div
              class="w-40   text-center py-2 rounded-2xl text-lg font-bold ml-2 {{
                DanhmucActive
                  ? 'bg-blue-500 text-white'
                  : 'text-purple-500 bg-gray-200'
              }}"
              (click)="DanhmucActive = !DanhmucActive; MenuActive = false"
            >
              Danh mục
            </div>
          </div>
        </div>

        <div class="py-5 px-3" *ngIf="DanhmucActive == true">
          <mat-accordion>
            <mat-expansion-panel
              *ngFor="let itemmenu of danhmuc"
              (opened)="panelOpenState = true"
              (closed)="panelOpenState = false"
            >
              <mat-expansion-panel-header>
                <mat-panel-title>
                  <div *ngIf="itemmenu?.children.length > 0; else notparent">
                    <a
                      routerLink="/{{ itemmenu.Slug }}"
                      class="text-purple-500 text-2xl font-bold"
                      >{{ itemmenu.Tieude }}</a
                    >
                  </div>
                  <ng-template #notparent>
                    <a
                      routerLink="/{{ itemmenu.Slug }}"
                      class="text-purple-500 text-2xl font-bold"
                      (click)="drawer.toggle()"
                      >{{ itemmenu.Tieude }}</a
                    >
                  </ng-template>
                </mat-panel-title>
              </mat-expansion-panel-header>
              <div *ngIf="itemmenu?.children.length > 0">
                <div
                  class="flex flex-col"
                  *ngFor="let item of itemmenu.children"
                >
                  <a
                    class="text-purple-500 text-2xl font-bold"
                    routerLink="/{{ item.Slug }}"
                    (click)="drawer.toggle()"
                    >{{ item.Tieude }}</a
                  >
                </div>
              </div>
            </mat-expansion-panel>
          </mat-accordion>
          <!-- <ul class="nav-mobile">
            
            <li
              class="text-purple-500  text-2xl font-bold"
              *ngFor="let item of danhmuc"
            >
              <a routerLink="sanpham" (click)="drawer.toggle()">{{
                item.Tieude
              }}</a>
            </li>
          </ul> -->
        </div>
        <div class="py-5 px-3" *ngIf="MenuActive == true">
          <ul class="nav-mobile">
            <li class="text-purple-500 text-2xl font-bold py-2">
              <a routerLink="" (click)="drawer.toggle()">Trang chủ</a>
            </li>
            <li class="text-purple-500 text-2xl font-bold py-2">
              <a routerLink="sanpham" (click)="drawer.toggle()">Sản phẩm</a>
            </li>
            <li class="text-purple-500 text-2xl font-bold py-2">
              <a routerLink="" (click)="drawer.toggle()">Thương hiệu</a>
            </li>
            <li class="text-purple-500 text-2xl font-bold py-2">
              <a routerLink="" (click)="drawer.toggle()">Flase Sale</a>
            </li>
            <li class="text-purple-500 text-2xl font-bold py-2">
              <mat-accordion>
                <mat-expansion-panel>
                  <mat-expansion-panel-header>
                    <mat-panel-title>
                      <p class="text-purple-500 text-2xl font-bold py-2">
                        Về chúng tôi
                      </p>
                    </mat-panel-title>
                  </mat-expansion-panel-header>

                  <div class="pl-3 flex flex-col">
                    <a
                      routerLink="/gioithieu"
                      class="text-purple-500 text-2xl font-bold"
                      aria-current="page"
                      (click)="drawer.toggle()"
                      >Giới Thiệu</a
                    >
                    <a
                      routerLink="/lienhe"
                      class="text-purple-500 text-2xl font-bold"
                      aria-current="page"
                      (click)="drawer.toggle()"
                      >Liên hệ</a
                    >
                    <a
                      routerLink=""
                      class="text-purple-500 text-2xl font-bold"
                      aria-current="page"
                      (click)="drawer.toggle()"
                      >Chính Sách Đổi Trả</a
                    >
                    <a
                      routerLink=""
                      class="text-purple-500 text-2xl font-bold"
                      aria-current="page"
                      (click)="drawer.toggle()"
                      >Hình Thức Thanh Toán</a
                    >
                  </div>
                </mat-expansion-panel>
              </mat-accordion>
            </li>
            <li class="text-purple-500 text-2xl font-bold py-2">
              <a routerLink="tintuc" (click)="drawer.toggle()">Tin Tức</a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </mat-drawer>

  <div
    class="example-sidenav-content flex flex-col relative"
    *ngIf="cauhinh?.data"
  >
    <header class="">
      <div class="bg-blue-500 hidden lg:block">
        <div class="lg:max-w-7xl lg:mx-auto lg:px-5 py-3">
          <div class="flex justify-between items-center">
            <div class="text-white text-lg">
              {{ cauhinh.data.title }}
            </div>
            <div class="flex">
              <div class="text-white text-lg font-bold relative ml-3">
                <div (click)="isShowLogin = !isShowLogin" class="flex">
                  <span class="material-icons mr-2">
                    {{ isShowLogin == true ? "close" : "account_circle" }}
                  </span>
                  <ul class="flex">
                    <li>
                      {{ isLogin == true ? user?.name : "Đăng nhập/Đăng ký" }}
                    </li>
                  </ul>
                </div>
                <div
                  class="absolute w-56 p-4 rounded-xl right-0 mt-3 bg-white z-20"
                  *ngIf="isShowLogin == true"
                >
                  <form
                    class="w-full {{ isLogin ? 'hidden' : 'block' }}"
                    [formGroup]="signInForm"
                  >
                    <input
                      placeholder="Tài Khoản"
                      class="p-2 rounded-2xl w-40 border border-black z-20 text-md text-gray-500"
                      type="text"
                      [formControlName]="'SDT'"
                    />
                    <!-- <mat-error
                      *ngIf="signInForm.get('SDT').hasError('required')"
                    >
                      Vui Lòng Nhập Số Điện Thoại
                    </mat-error> -->
                    <input
                      placeholder="Mật Khẩu"
                      class="p-2 rounded-2xl w-40 border border-black z-20 mt-3 text-md text-gray-500"
                      type="password"
                      [formControlName]="'password'"
                      (keyup.enter)="signIn()"
                    />
                    <!-- <mat-error> Vui Lòng Nhập Mật Khẩu </mat-error> -->
                    <div
                      class="text-white bg-orange-500 p-2 hover:bg-purple-500 w-32 cursor-pointer mt-3 text-center rounded-2xl text-md"
                      (click)="signIn()"
                    >
                      Đăng nhập
                    </div>
                    <a
                      class="text-gray-500 text-sm mt-3 hover:text-gray-400"
                      routerLink="#"
                      >Bạn quên mật khẩu?</a
                    >
                    <div class="text-gray-500 text-sm hover:text-gray-400">
                      Bạn không có tài khoản
                      <a
                        class="text-gray-500 text-sm hover:text-gray-400"
                        routerLink="signin"
                        >Đăng ký</a
                      >
                    </div>
                  </form>
                  <div
                    class="flex flex-col items-center w-full  {{
                      isLogin ? 'block' : 'hidden'
                    }}"
                  >
                    <a
                      routerLink="profile"
                      class="text-white bg-orange-500 p-2 hover:bg-purple-500 w-full cursor-pointer mt-3 text-center rounded-2xl text-md"
                    >
                      Dashbord
                    </a>
                    <div
                      class="text-white bg-orange-500 cursor-pointer p-2 hover:bg-purple-500 w-full cursor-pointer mt-3 text-center rounded-2xl text-md"
                      (click)="signout()"
                    >
                      Đăng xuất
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div
        class="lg:max-w-7xl lg:mx-auto lg:px-5 md:px-10 px-3 py-3 nav-header"
      >
        <div class="flex items-center justify-between">
          <div class="text-2xl h-12 lg:w-2/12 md:w-3/12">
            <a class="w-full h-12 hidden lg:block" routerLink=""
              ><img
                src="../../../../assets/images/homepage/desktop/LOGO-WEBSITE-MT.png"
                alt=""
            /></a>
            <div class="h-12 lg:hidden" routerLink="">
              <img
                src="../../../../assets/images/homepage/desktop/LOGO-WEBSITE-MT.png"
                class="w-full h-full object-contain"
                alt=""
              />
            </div>
          </div>
          <div class="sm:flex lg:hidden">
            <span class="material-icons text-3xl mr-3"> search </span>
            <span class="material-icons text-3xl" (click)="drawer.toggle()">
              list
            </span>
          </div>
          <div class="hidden lg:block relative">
            <div class="flex items-center w-full">
              <mat-select
                class="p-3 text-purple-500 rounded-l-3xl text-lg border w-28 h-full bg-gray-200"
                placeholder="Tìm Kiếm"
                (selectionChange)="selectCategoriesSearch($event.value)"
              >
                <mat-option
                  [value]="item"
                  class="text-purple-500 text-lg"
                  *ngFor="let item of categories"
                >
                  {{ item.Tieude }}</mat-option
                >
              </mat-select>
              <div class="w-96" style="height: 50px">
                <input
                  class="p-3 bg-gray-200 text-purple-500 text-lg w-full h-full"
                  placeholder="Bạn muốn tìm kiếm sản phẩm nào?"
                  [(ngModel)]="searchText"
                  (keyup.Enter)="searchSanpham()"
                />
              </div>
              <button
                class="bg-orange-500 text-white text-lg py-3 px-1 w-1/12 h-full rounded-r-3xl flex items-center justify-center"
                (keyup.Enter)="searchSanpham()"
              >
                <span class="material-icons text-white"> search </span>
              </button>
            </div>
            <div
              class="absolute w-full left-0 bg-white rounded-2xl z-20 {{
                productSearch > 3 ? 'h-80' : 'h-auto'
              }} overflow-auto"
              *ngIf="productSearchPopup == true"
              (mouseleave)="productSearchPopup = false"
            >
              <div
                class="p-3 flex flex-col w-full"
                (mouseenter)="productSearchPopup = true"
                *ngIf="productSearch?.length > 0"
              >
                <div
                  class="flex items-center"
                  *ngFor="let item of productSearch"
                >
                  <div class="pr-2">
                    <div class="h-20 w-20">
                      <img src="{{ item.Image }}" class="w-full h-full" />
                    </div>
                    <div
                      class="rounded-xl text-center text-white mt-1 bg-green-500 rounded-2xl text-xs"
                    >
                      Sale
                    </div>
                  </div>
                  <div class="flex flex-col">
                    <p class="text-gray-300">{{ item.tenDm }}</p>
                    <a
                      routerLink="sanpham/{{ item.id }}"
                      class="text-purple-500 hover:text-purple-900 mt-1"
                      >{{ item.Tieude }}</a
                    >
                    <p class="mt-1 text-gray-300">SKU: {{ item.SKU }}</p>
                    <div class="flex">
                      <div class="text-blue-500 text-lg mr-2">
                        {{
                          item.GiaSale
                            ? item.GiaSale
                            : (item.Gia | currency: "VND")
                        }}
                      </div>
                      <span class="text-lg relative" *ngIf="item.GiaSale != 0"
                        >{{ item.Gia | currency: "VND" }}
                        <div
                          class="absolute left-0 top-1/2 centerY w-full h-px bg-black"
                        ></div>
                      </span>
                    </div>
                  </div>
                </div>
              </div>
              <p
                class="text-purple-500 p-3 text-center w-full text-xl"
                *ngIf="productSearch?.length == 0"
              >
                Không tìm thấy sản phẩm
              </p>
            </div>
          </div>
          <div class="hidden lg:flex items-center justify-end">
            <a href="tel:0368 651 526"
              ><span class="material-icons text-4xl text-blue-500 mr-3">
                phone
              </span></a
            >

            <div class="">
              <p class="text-purple-500">Hotline</p>
              <a
                href="tel:{{ cauhinh.data.phone }}"
                class="text-bold text-purple-500 font-bold text-lg"
              >
                {{ cauhinh.data.phone }}
              </a>
            </div>
          </div>
        </div>
      </div>
      <div class="relative hidden lg:block">
        <mat-divider class="bg-gray-300"></mat-divider>

        <div class="lg:max-w-7xl lg:mx-auto relative lg:px-5">
          <div class="flex items-center w-full relative">
            <div class="py-3 w-2/12 categories">
              <div
                class="flex items-center justify-center categories-hover p-3 w-32 rounded-3xl font-bold text-center w-full"
              >
                <img
                  src="../../../../assets/images/homepage/desktop/icon-danh-muc-tam-thoi.jpg"
                  alt=""
                  class="w-7 h-7 object-contain mr-3"
                />
                Danh mục
                <div
                  class="absolute z-20 left-0 categories-item"
                  style="width: 1250px"
                >
                  <div
                    class="flex justify-between flex-col lg:max-w-7xl lg:mx-auto lg:px-5 rounded-xl"
                  >
                    <div
                      class="flex rounded overflow-hidden shadow-lg bg-white z-20"
                    >
                      <div class="px-3 bg-gray-200 w-1/5">
                        <ul class="py-7 flex flex-col justify-between">
                          <li
                            class="text-lg text-purple-500 font-bold hover:text-blue-500 active mb-5"
                            *ngFor="let item of danhmuc; let i = index"
                          >
                            <span
                              class="text-gray-500 hover:text-purple-500"
                              (click)="selectDanhmuc(i)"
                              >{{ item.Tieude }}</span
                            >
                          </li>
                        </ul>
                      </div>
                      <div
                        class="flex rounded overflow-auto shadow-lg w-4/5 py-5 pr-5"
                      >
                        <div
                          class="px-5 w-1/5 border-gray-400 border-r"
                          *ngFor="let item of danhmucChild"
                        >
                          <ul class="h-full flex flex-col items-center">
                            <li class="w-full">
                              <img
                                src="{{ item.Image }}"
                                class="w-full h-full"
                                alt=""
                              />
                            </li>
                            <li class="pt-3 text-lg text-purple-500 font-bold">
                              {{ item.Tieude }}
                            </li>
                            <li
                              class="pt-3 text-gray-400 hover:text-purple-500 cursos-pointer hover:underline"
                              *ngFor="let itemchild of item.children"
                            >
                              {{ itemchild.Tieude }}
                            </li>

                            <li
                              class="pt-4 text-blue-500 font-bold cursos-pointer"
                            >
                              View all >
                            </li>
                          </ul>
                        </div>

                        <div class="w-56 h-96 bg-gray-300 rounded-xl relative">
                          <div
                            class="absolute top-10 left-1/2 centerX w-44 h-1/2 bg-red-200"
                          >
                            200*200
                          </div>
                          <div
                            class="top-1/2 absolute mt-10 w-full z-10 left-1/2 centerX centerY"
                          >
                            <span class="text-purple-500"
                              >Pyridoxine Vitamon B6</span
                            >
                            <h3 class="text-purple-500 font-bold text-2xl">
                              Vitamins & Supplements
                            </h3>
                            <div
                              class="w-1/2 mt-3 mx-auto py-2 text-center bg-orange-500 text-white text-lg rounded-2xl"
                            >
                              Show now
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="flex justify-between w-full">
              <div class="flex items-center">
                <div class="text-lg text-purple-500 font-bold w-28 mx-2">
                  <div class="links relative">
                    <a
                      routerLink=""
                      class="text-lg text-purple-500 font-bold text-center block line-hover"
                    >
                      Trang Chủ
                    </a>
                  </div>
                </div>
                <div class="text-lg text-purple-500 font-bold w-28 mx-2">
                  <div class="links relative">
                    <a
                      routerLink="/sanpham"
                      class="text-lg text-purple-500 font-bold text-center block line-hover"
                    >
                      Sản Phẩm
                    </a>
                  </div>
                </div>
                <div
                  class="text-lg text-purple-500 font-bold thuonghieu group py-4 w-28 mx-2"
                >
                  <div class="links">
                    <a
                      class="text-lg text-purple-500 font-bold text-center block"
                    >
                      Thương Hiệu
                    </a>
                  </div>
                  <div class="bg-white z-20 thuonghieu-item-hover">
                    <div class="lg:max-w-7xl lg:mx-auto lg:px-5 w-full h-full">
                      <swiper
                        [config]="config"
                        [navigation]="true"
                        class="mySwiper"
                      >
                        <ng-template
                          swiperSlide
                          *ngFor="let item of thuonghieus"
                          ><div class="w-40 flex items-center thuonghieu-item">
                            <img
                              src="{{ item.Image }}"
                              class="w-full h-full"
                              alt=""
                            />
                            {{ item.Tieude }}
                          </div>
                        </ng-template>
                      </swiper>
                    </div>
                  </div>
                </div>

                <div class="links flex w-28 mx-2">
                  <div class="dropdown relative gioithieu-menu">
                    <div class="py-4">
                      <button
                        class="dropdown-toggle border-none cusor-pointer relative hover:text-yellow-500"
                        type="button"
                        id="dropdownMenuButton1"
                        data-bs-toggle="dropdown"
                        aria-expanded="false"
                      >
                        <a
                          routerLink=""
                          class="block text-purple-500 font-bold text-center lg:inline-block lg:mt-0 line-hover text-lg line-hover"
                        >
                          Về Chúng Tôi
                        </a>
                      </button>
                    </div>

                    <ul
                      class="dropdown-menu gioithieu-hover min-w-max absolute bg-white z-50 float-left py-2 list-none text-left rounded-lg shadow-lg m-0 bg-clip-padding border-none"
                    >
                      <li class="relative mt-2">
                        <a
                          class="block text-purple-500 font-bold mx-4 line-hover text-lg"
                          routerLink="gioithieu"
                          >Giới Thiệu</a
                        >
                      </li>

                      <li class="relative mt-2">
                        <a
                          class="block text-purple-500 font-bold mx-4 line-hover text-lg"
                          routerLink="lienhe"
                          >Liên Hệ</a
                        >
                      </li>
                    </ul>
                  </div>
                </div>

                <div class="text-lg text-purple-500 font-bold w-28 mx-2 py-4">
                  <div class="links relative">
                    <a
                      routerLink="/tintuc"
                      class="text-lg text-purple-500 font-bold text-center block line-hover"
                    >
                      Tin Tức
                    </a>
                  </div>
                </div>
              </div>
              <ul class="flex items-center flex-end">
                <li
                  class="mx-2 text-lg text-purple-500 font-bold cusor-pointer"
                >
                  <a routerLink="san-pham-da-xem">
                    <mat-icon matBadgeColor="warn" class="text-purple-500"
                      >compare_arrows</mat-icon
                    >
                    <!-- Include text description of the icon's meaning for screen-readers -->
                  </a>
                </li>

                <li
                  class="mx-2 text-lg text-purple-500 font-bold relative cusor-pointer"
                  (mouseenter)="isShowCart = true"
                  (mouseleave)="isShowCart = false"
                >
                  <app-cart-popup [isShowCart]="isShowCart"></app-cart-popup>
                </li>
              </ul>
            </div>
          </div>
        </div>

        <mat-divider class="bg-gray-300"></mat-divider>
      </div>
    </header>
    <router-outlet></router-outlet>
    <app-footer [data]="cauhinh.data"></app-footer>
    <div class="fixed bottom-0 left-0 h-12 bg-gray-200 w-full lg:hidden z-20">
      <div class="flex w-full justify-around items-center h-full">
        <div class="w-10 h-10 bg-red-200" class="flex items-center justify-center flex-col">
          <a routerLink="" 
            ><span class="material-icons"> home </span></a
          >
        </div>
        <div class="w-10 h-10 flex items-center justify-center flex-col bg-red-200"><a routerLink="sanpham"  class="flex items-center justify-center flex-col"></a></div>
        <div class="w-10 h-10 flex items-center justify-center flex-col bg-red-200"><a routerLink="gioithieu"  class="flex items-center justify-center flex-col"></a></div>
        <div class="w-10 h-10 flex items-center justify-center flex-col bg-red-200"><a routerLink="checkout"  class="flex items-center justify-center flex-col"><span class="material-icons">
          shopping_cart
          </span></a></div>
        <div class="w-10 h-10 flex items-center justify-center flex-col bg-red-200"  class="flex items-center justify-center flex-col"></div>
      </div>
    </div>
  </div>
</mat-drawer-container>
